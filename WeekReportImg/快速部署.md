# å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

### 1. ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨

```bash
# æ–¹å¼1: ä½¿ç”¨ git
git clone <your-repo-url> /opt/WeekReportImg
cd /opt/WeekReportImg

# æ–¹å¼2: ä½¿ç”¨ scpï¼ˆåœ¨æœ¬åœ°æ‰§è¡Œï¼‰
scp -r WeekReportImg/ user@your-server:/opt/WeekReportImg
```

### 2. è¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
cd /opt/WeekReportImg  # æˆ–é¡¹ç›®æ‰€åœ¨ç›®å½•
sudo bash deploy.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
- âœ… æ£€æŸ¥ Python ç¯å¢ƒ
- âœ… å®‰è£…ä¾èµ–
- âœ… åˆ›å»ºå¿…è¦ç›®å½•
- âœ… é…ç½®ç”Ÿäº§ç¯å¢ƒ
- âœ… åˆ›å»º systemd æœåŠ¡
- âœ… å¯åŠ¨æœåŠ¡
- âœ… é…ç½®é˜²ç«å¢™

### 3. è®¿é—®æœåŠ¡

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ï¼š`http://your-server-ip:5555`

## æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

### 1. å‡†å¤‡ç¯å¢ƒ

```bash
# æ£€æŸ¥ Python
python3 --version  # éœ€è¦ >= 3.7

# å®‰è£…ä¾èµ–
pip3 install -r requirements-web.txt
```

### 2. ä¿®æ”¹é…ç½®

ç¼–è¾‘ `app.py`ï¼Œå°†æœ€åä¸€è¡Œæ”¹ä¸ºï¼š
```python
app.run(host='0.0.0.0', port=5555, debug=False)
```

### 3. åˆ›å»º systemd æœåŠ¡

```bash
sudo nano /etc/systemd/system/weekreportimg.service
```

ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼ˆä¿®æ”¹è·¯å¾„å’Œç”¨æˆ·ï¼‰ï¼š
```ini
[Unit]
Description=WeekReportImg Web Service
After=network.target

[Service]
Type=simple
User=www-data
Group=www-data
WorkingDirectory=/opt/WeekReportImg
Environment="PATH=/usr/bin:/usr/local/bin"
ExecStart=/usr/bin/python3 /opt/WeekReportImg/app.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

### 4. å¯åŠ¨æœåŠ¡

```bash
sudo systemctl daemon-reload
sudo systemctl enable weekreportimg
sudo systemctl start weekreportimg
sudo systemctl status weekreportimg
```

### 5. é…ç½®é˜²ç«å¢™

```bash
# Ubuntu/Debian
sudo ufw allow 5555/tcp

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=5555/tcp
sudo firewall-cmd --reload
```

## éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status weekreportimg

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u weekreportimg -f

# æµ‹è¯•è®¿é—®
curl http://localhost:5555
```

## å¸¸è§é—®é¢˜

**Q: æœåŠ¡æ— æ³•å¯åŠ¨ï¼Ÿ**
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
sudo journalctl -u weekreportimg -n 50
```

**Q: æ— æ³•è®¿é—®ï¼Ÿ**
- æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ 5555 ç«¯å£
- æ£€æŸ¥äº‘æœåŠ¡å™¨å®‰å…¨ç»„è§„åˆ™
- ç¡®è®¤æœåŠ¡æ­£åœ¨è¿è¡Œï¼š`sudo systemctl status weekreportimg`

**Q: æƒé™é”™è¯¯ï¼Ÿ**
```bash
sudo chown -R www-data:www-data /opt/WeekReportImg
sudo chmod -R 755 /opt/WeekReportImg
```

## ä¸‹ä¸€æ­¥

- ğŸ“– æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å—.md](éƒ¨ç½²æŒ‡å—.md) äº†è§£è¯¦ç»†é…ç½®
- ğŸ”’ é…ç½® Nginx åå‘ä»£ç†å’Œ SSL è¯ä¹¦
- ğŸ“Š è®¿é—® `http://your-server-ip:5555` å¼€å§‹ä½¿ç”¨
