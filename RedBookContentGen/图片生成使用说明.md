# å›¾ç‰‡ç”Ÿæˆå™¨ä½¿ç”¨è¯´æ˜

æ ¹æ®å›¾ç‰‡æç¤ºè¯æ–‡ä»¶ï¼Œä½¿ç”¨é˜¿é‡Œäº‘é€šä¹‰ä¸‡ç›¸APIç”Ÿæˆå›¾ç‰‡ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- âœ… **è‡ªåŠ¨è§£ææç¤ºè¯**ï¼šä» `image_prompts.txt` æ–‡ä»¶è¯»å–æç¤ºè¯
- âœ… **å¼‚æ­¥ç”Ÿæˆ**ï¼šä½¿ç”¨å¼‚æ­¥APIï¼Œæ”¯æŒä»»åŠ¡è½®è¯¢
- âœ… **è‡ªåŠ¨ä¸‹è½½**ï¼šå›¾ç‰‡ç”Ÿæˆåè‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°
- âœ… **æ—¥æœŸæ–‡ä»¶å¤¹**ï¼šå›¾ç‰‡ä¿å­˜åˆ°å¯¹åº”çš„æ—¥æœŸæ–‡ä»¶å¤¹

## é…ç½®è¯´æ˜

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½® API Key

ä½¿ç”¨å’Œå†…å®¹ç”Ÿæˆå™¨ç›¸åŒçš„ `config.json` æ–‡ä»¶ï¼Œå·²ç»åŒ…å«äº†ä½ çš„ API Keyã€‚

æ–°å¢é…ç½®é¡¹ï¼š
```json
{
  "image_model": "wan2.2-t2i-flash"
}
```

**æ”¯æŒçš„æ¨¡å‹**ï¼š
- `wan2.2-t2i-flash` - æé€Ÿç‰ˆï¼ˆæ¨èï¼‰
- `wan2.2-t2i-plus` - ä¸“ä¸šç‰ˆï¼ˆè´¨é‡æ›´é«˜ï¼‰
- `wan2.1-t2i-turbo` - æ—§ç‰ˆå¿«é€Ÿæ¨¡å‹
- `wan2.6-image` - æ”¯æŒå›¾æ–‡æ··æ’

## ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šä¸€é”®æ‰§è¡Œï¼ˆæ¨èï¼‰

```bash
python run_all.py
```
ä¼šå…ˆç”Ÿæˆæ–‡æ¡ˆä¸æç¤ºè¯ï¼Œå†æ ¹æ®æç¤ºè¯ç”Ÿæˆå›¾ç‰‡ï¼Œå…¨éƒ¨å†™å…¥å¯¹åº”æ—¥æœŸæ–‡ä»¶å¤¹ã€‚

### æ–¹å¼äºŒï¼šåˆ†æ­¥æ‰§è¡Œ

**1. ç”Ÿæˆå†…å®¹**ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
python redbook_content_generator.py
```

è¿™ä¼šç”Ÿæˆå›¾ç‰‡æç¤ºè¯æ–‡ä»¶ `output/images/YYYYMMDD/image_prompts.txt`ã€‚

**2. ç”Ÿæˆå›¾ç‰‡**

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆè‡ªåŠ¨ä½¿ç”¨æœ€æ–°æ—¥æœŸæ–‡ä»¶å¤¹ï¼‰
python image_generator.py

# æŒ‡å®šæç¤ºè¯æ–‡ä»¶
python image_generator.py -p output/images/20260119/image_prompts.txt

# æŒ‡å®šé…ç½®æ–‡ä»¶
python image_generator.py -c my_config.json
```

**3. æŸ¥çœ‹ç»“æœ**

å›¾ç‰‡ä¼šä¿å­˜åˆ°å’Œæç¤ºè¯æ–‡ä»¶ç›¸åŒçš„ç›®å½•ä¸­ï¼š

```
output/images/20260119/
â”œâ”€â”€ image_prompts.txt    # æç¤ºè¯æ–‡ä»¶
â”œâ”€â”€ content.md           # å®Œæ•´å†…å®¹
â”œâ”€â”€ image_01.png         # ç”Ÿæˆçš„å›¾ç‰‡1
â”œâ”€â”€ image_02.png         # ç”Ÿæˆçš„å›¾ç‰‡2
â”œâ”€â”€ image_03.png         # ç”Ÿæˆçš„å›¾ç‰‡3
â””â”€â”€ image_04.png         # ç”Ÿæˆçš„å›¾ç‰‡4
```

## å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-p, --prompts` | æŒ‡å®šæç¤ºè¯æ–‡ä»¶è·¯å¾„ |
| `-c, --config` | æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ï¼šconfig.jsonï¼‰ |

## å·¥ä½œæµç¨‹

1. ğŸ“– **è¯»å–æç¤ºè¯æ–‡ä»¶** â†’ è§£æå‡ºæ‰€æœ‰åœºæ™¯å’Œæç¤ºè¯
2. ğŸ¨ **åˆ›å»ºç”Ÿæˆä»»åŠ¡** â†’ è°ƒç”¨é€šä¹‰ä¸‡ç›¸API
3. â³ **è½®è¯¢ä»»åŠ¡çŠ¶æ€** â†’ ç­‰å¾…å›¾ç‰‡ç”Ÿæˆå®Œæˆ
4. ğŸ’¾ **ä¸‹è½½å›¾ç‰‡** â†’ ä¿å­˜åˆ°æœ¬åœ°

## ç¤ºä¾‹

### è¾“å…¥æç¤ºè¯æ–‡ä»¶

```
## å›¾1: å†¬æ—¥æ¸…æ™¨çš„æ•…å®«åˆé—¨å¹¿åœº

```
A winter morning at Meridian Gate, sunlight casting shadows...
```

## å›¾2: æ˜ä»£å»·æ–åœºæ™¯

```
Recreation of Ming Dynasty court caning...
```
```

### è¾“å‡º

```
============================================================
ğŸ¨ å›¾ç‰‡ç”Ÿæˆå™¨
============================================================

ğŸ“– æ­£åœ¨è¯»å–æç¤ºè¯æ–‡ä»¶: output/images/20260119/image_prompts.txt
âœ… æˆåŠŸè§£æ 4 ä¸ªæç¤ºè¯
ğŸ“ è¾“å‡ºç›®å½•: output/images/20260119

ğŸ¨ å¼€å§‹ç”Ÿæˆå›¾ç‰‡ï¼ˆæ¨¡å‹: wan2.2-t2i-flashï¼‰

==================================================
å›¾1: å†¬æ—¥æ¸…æ™¨çš„æ•…å®«åˆé—¨å¹¿åœº...
==================================================
  ğŸ“¤ æ­£åœ¨ç”Ÿæˆå›¾1: A winter morning at Meridian Gate...
  âœ… ä»»åŠ¡åˆ›å»ºæˆåŠŸ: task-xxx
  â³ ç­‰å¾…ä¸­... çŠ¶æ€: RUNNING
  âœ… å›¾ç‰‡ç”ŸæˆæˆåŠŸ
  ğŸ’¾ å·²ä¿å­˜: output/images/20260119/image_01.png

==================================================
å›¾2: æ˜ä»£å»·æ–åœºæ™¯...
==================================================
  ...

============================================================
âœ… æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼
ğŸ“ å›¾ç‰‡å·²ä¿å­˜åˆ°: output/images/20260119
============================================================
```

## æ³¨æ„äº‹é¡¹

1. **APIè´¹ç”¨**ï¼šé€šä¹‰ä¸‡ç›¸ API ä¼šäº§ç”Ÿè´¹ç”¨ï¼Œè¯·æ³¨æ„ä½¿ç”¨é‡
2. **å›¾ç‰‡æœ‰æ•ˆæœŸ**ï¼šAPIè¿”å›çš„å›¾ç‰‡URLæœ‰æ•ˆæœŸä¸º24å°æ—¶ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ä¸‹è½½
3. **ç”Ÿæˆæ—¶é—´**ï¼šæ¯å¼ å›¾ç‰‡ç”Ÿæˆé€šå¸¸éœ€è¦10-30ç§’
4. **ç½‘ç»œè¿æ¥**ï¼šéœ€è¦èƒ½å¤Ÿè®¿é—®é˜¿é‡Œäº‘ API
5. **å›¾ç‰‡å°ºå¯¸**ï¼šé»˜è®¤ç”Ÿæˆ 1024Ã—1365 (3:4) å›¾ç‰‡

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šåˆ›å»ºä»»åŠ¡å¤±è´¥ï¼ˆ401ï¼‰
**è§£å†³**ï¼šæ£€æŸ¥ `config.json` ä¸­çš„ `openai_api_key` æ˜¯å¦æ­£ç¡®

### é—®é¢˜ï¼šä»»åŠ¡è¶…æ—¶
**è§£å†³**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å°è¯•ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹ï¼ˆå¦‚ `wan2.2-t2i-flash`ï¼‰
- ä¿®æ”¹è„šæœ¬ä¸­çš„ `max_wait` å‚æ•°å¢åŠ ç­‰å¾…æ—¶é—´

### é—®é¢˜ï¼šæç¤ºè¯æ–‡ä»¶ä¸å­˜åœ¨
**è§£å†³**ï¼š
- å…ˆè¿è¡Œ `redbook_content_generator.py` ç”Ÿæˆå†…å®¹
- æˆ–ä½¿ç”¨ `-p` å‚æ•°æŒ‡å®šæ­£ç¡®çš„æç¤ºè¯æ–‡ä»¶è·¯å¾„

## å®Œæ•´å·¥ä½œæµç¤ºä¾‹

```bash
# 1. å‡†å¤‡è¾“å…¥å†…å®¹
echo "è®°å¾—å°æ—¶å€™ï¼Œèƒ¡åŒå£é‚£æ£µå¤§æ§æ ‘..." > input_content.txt

# 2. ä¸€é”®æ‰§è¡Œï¼šå†…å®¹ç”Ÿæˆ + å›¾ç‰‡ç”Ÿæˆ
python run_all.py

# 3. æŸ¥çœ‹ç»“æœ
ls output/images/$(date +%Y%m%d)/
```

## æ–‡ä»¶ç»“æ„

```
RedBookContentGen/
â”œâ”€â”€ redbook_content_generator.py  # å†…å®¹ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ image_generator.py            # å›¾ç‰‡ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ config.json                  # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt              # ä¾èµ–æ–‡ä»¶
â”œâ”€â”€ input_content.txt            # è¾“å…¥å†…å®¹
â””â”€â”€ output/
    â”œâ”€â”€ redbook_content.xlsx     # Excelæ–‡ä»¶
    â””â”€â”€ images/
        â””â”€â”€ 20260119/           # æ—¥æœŸæ–‡ä»¶å¤¹
            â”œâ”€â”€ image_prompts.txt
            â”œâ”€â”€ content.md
            â”œâ”€â”€ image_01.png
            â”œâ”€â”€ image_02.png
            â”œâ”€â”€ image_03.png
            â””â”€â”€ image_04.png
```
