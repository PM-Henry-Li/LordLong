{
  "_comment": "RedBookContentGen 配置文件 - 请勿提交包含真实 API Key 的配置文件到版本控制",
  
  "_section_basic": "=== 基础配置 ===",
  "input_file": "input/input_content.txt",
  "output_excel": "output/redbook_content.xlsx",
  "output_image_dir": "output/images",
  
  "_section_api": "=== API 配置 ===",
  "openai_api_key": "${OPENAI_API_KEY}",
  "_comment_api_key": "推荐使用环境变量 OPENAI_API_KEY。支持 ${ENV_VAR} 或 ${ENV_VAR:default} 语法",
  "_example_api_key": "示例: ${OPENAI_API_KEY} 或 ${OPENAI_API_KEY:your-default-key}",
  "openai_model": "${OPENAI_MODEL:qwen-max}",
  "_comment_model": "可选: qwen-turbo (快速), qwen-plus (平衡), qwen-max (最强)。使用环境变量或默认值",
  "openai_base_url": "${OPENAI_BASE_URL:https://dashscope.aliyuncs.com/compatible-mode/v1}",
  "_comment_base_url": "使用阿里云通义千问时保持默认值",
  
  "_section_image": "=== 图片生成配置 ===",
  "image_model": "wan2.2-t2i-flash",
  "_comment_image_model": "可选: wan2.2-t2i-flash (快速), wan2.2-t2i-plus (高质量), wanx-v1 (稳定)",
  "image_generation_mode": "template",
  "_comment_image_mode": "template (离线模板, 推荐) 或 api (AI生成, 需要API Key)",
  "image_api_provider": "${IMAGE_API_PROVIDER:aliyun}",
  "_comment_image_api_provider": "图片生成服务提供商: aliyun (阿里云通义万相) 或 volcengine (火山引擎即梦AI)",
  "template_style": "retro_chinese",
  "_comment_template_style": "可选: retro_chinese, modern_minimal, vintage_film, warm_memory, ink_wash",
  
  "_section_volcengine": "=== 火山引擎即梦 AI 配置 ===",
  "_comment_volcengine": "仅在 image_api_provider 设置为 volcengine 时需要配置",
  "volcengine": {
    "access_key_id": "${VOLCENGINE_ACCESS_KEY_ID}",
    "_comment_access_key_id": "火山引擎 Access Key ID，推荐使用环境变量",
    "secret_access_key": "${VOLCENGINE_SECRET_ACCESS_KEY}",
    "_comment_secret_access_key": "火山引擎 Secret Access Key（可能是 Base64 编码），推荐使用环境变量",
    "endpoint": "${VOLCENGINE_ENDPOINT:https://visual.volcengineapi.com}",
    "_comment_endpoint": "火山引擎 API 端点，通常保持默认值",
    "service": "${VOLCENGINE_SERVICE:cv}",
    "_comment_service": "服务名称，通常为 cv (Computer Vision)",
    "region": "${VOLCENGINE_REGION:cn-north-1}",
    "_comment_region": "区域，可选: cn-north-1 (华北), cn-beijing (北京) 等",
    "model": "${VOLCENGINE_MODEL:general_v2}",
    "_comment_model": "模型版本，可选: general_v2 (通用v2), anime_v2 (动漫v2) 等",
    "timeout": 180,
    "_comment_timeout": "API 超时时间（秒），图片生成通常需要较长时间",
    "max_retries": 3,
    "_comment_max_retries": "最大重试次数",
    "retry_delay": 1.0,
    "_comment_retry_delay": "重试延迟（秒），使用指数退避策略",
    "api_version": "2022-08-31",
    "_comment_api_version": "API 版本，通常保持默认值"
  },
  
  "_section_features": "=== 功能开关 ===",
  "enable_ai_rewrite": false,
  "_comment_ai_rewrite": "是否启用 AI 改写功能",
  
  "_section_cache": "=== 缓存配置 ===",
  "cache": {
    "enabled": true,
    "_comment_enabled": "是否启用缓存功能",
    "ttl": 3600,
    "_comment_ttl": "缓存过期时间（秒），默认 3600 秒（1小时）",
    "max_size": 1000,
    "_comment_max_size": "缓存最大条目数，默认 1000 条"
  },
  
  "_section_rate_limit": "=== 速率限制配置 ===",
  "rate_limit": {
    "openai": {
      "requests_per_minute": 60,
      "_comment_rpm": "OpenAI API 每分钟最大请求数",
      "tokens_per_minute": 90000,
      "_comment_tpm": "OpenAI API 每分钟最大 token 数",
      "enable_rate_limit": true
    },
    "image": {
      "requests_per_minute": 10,
      "_comment_rpm": "图片生成 API 每分钟最大请求数",
      "enable_rate_limit": true,
      "max_concurrent": 3,
      "_comment_concurrent": "图片生成最大并发数"
    }
  },
  
  "_section_xiaohongshu": "=== 小红书搜索配置 ===",
  "xiaohongshu": {
    "search_mode": "browser",
    "_comment_mode": "搜索模式: browser (浏览器) 或 api (API)",
    "browser_type": "chrome",
    "_comment_browser": "浏览器类型: chrome, firefox, edge",
    "headless": false,
    "_comment_headless": "是否使用无头浏览器模式",
    "max_search_results": 10,
    "_comment_max_results": "最大搜索结果数量",
    "min_likes_threshold": 1000,
    "_comment_min_likes": "最小点赞数阈值",
    "login_required": false,
    "_comment_login": "是否需要登录",
    "request_delay": 2,
    "_comment_delay": "请求之间的延迟时间（秒）"
  },
  
  "_section_logging": "=== 日志配置 ===",
  "logging": {
    "level": "INFO",
    "_comment_level": "日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL",
    "format": "json",
    "_comment_format": "日志格式: json 或 text",
    "file": "logs/app.log",
    "_comment_file": "日志文件路径",
    "max_bytes": 10485760,
    "_comment_max_bytes": "单个日志文件最大字节数（10MB）",
    "backup_count": 5,
    "_comment_backup_count": "保留的备份文件数量",
    
    "_section_collector": "=== 日志收集配置 ===",
    "collector": {
      "enabled": false,
      "_comment_enabled": "是否启用日志收集功能",
      
      "elasticsearch": {
        "enabled": false,
        "_comment_es_enabled": "是否启用 Elasticsearch 日志收集",
        "hosts": ["http://localhost:9200"],
        "_comment_hosts": "Elasticsearch 主机列表",
        "index_prefix": "redbookcontent-logs",
        "_comment_index": "索引前缀，实际索引名为 {prefix}-YYYY.MM.DD",
        "username": null,
        "password": null,
        "_comment_auth": "Elasticsearch 认证信息（可选）",
        "buffer_size": 100,
        "_comment_buffer": "缓冲区大小，达到此大小时自动刷新",
        "flush_interval": 5.0,
        "_comment_flush": "刷新间隔（秒），定期刷新缓冲区",
        "level": "INFO"
      },
      
      "logstash": {
        "enabled": false,
        "_comment_ls_enabled": "是否启用 Logstash 日志收集",
        "host": "localhost",
        "port": 5000,
        "_comment_port": "Logstash 端口",
        "protocol": "tcp",
        "_comment_protocol": "协议类型: tcp 或 udp",
        "buffer_size": 100,
        "flush_interval": 5.0,
        "level": "INFO"
      },
      
      "http": {
        "enabled": false,
        "_comment_http_enabled": "是否启用 HTTP 日志收集",
        "url": "http://localhost:8080/logs",
        "_comment_url": "HTTP 端点 URL",
        "headers": {
          "Content-Type": "application/json"
        },
        "_comment_headers": "自定义 HTTP 头",
        "username": null,
        "password": null,
        "_comment_http_auth": "HTTP 认证信息（可选）",
        "buffer_size": 100,
        "flush_interval": 5.0,
        "level": "INFO"
      },
      
      "file": {
        "enabled": false,
        "_comment_file_enabled": "是否启用文件日志收集（供 Filebeat 等工具采集）",
        "filename": "logs/collector.log",
        "_comment_filename": "日志文件路径",
        "max_bytes": 10485760,
        "_comment_max_bytes": "单个文件最大字节数（10MB）",
        "backup_count": 5,
        "_comment_backup": "保留的备份文件数量",
        "level": "INFO"
      }
    },
    
    "_section_alerting": "=== 日志告警配置 ===",
    "alerting": {
      "enabled": false,
      "_comment_alerting_enabled": "是否启用日志告警功能",
      "window_size": 300,
      "_comment_window_size": "时间窗口大小（秒），保留最近这段时间的日志用于规则检查",
      "check_interval": 10,
      "_comment_check_interval": "告警检查间隔（秒）",
      
      "_section_rules": "=== 告警规则配置 ===",
      "rules": [
        {
          "type": "error_rate",
          "_comment_error_rate": "错误率告警规则",
          "threshold": 0.05,
          "_comment_threshold": "错误率阈值（0-1），超过此比例触发告警",
          "duration": 300,
          "_comment_duration": "持续时间（秒），条件持续满足此时间才触发",
          "severity": "critical",
          "_comment_severity": "告警严重级别: info, warning, critical"
        },
        {
          "type": "slow_response",
          "_comment_slow_response": "慢响应告警规则",
          "threshold": 10.0,
          "_comment_threshold_time": "响应时间阈值（秒），P95 超过此值触发告警",
          "duration": 300,
          "severity": "warning"
        },
        {
          "type": "api_failure",
          "_comment_api_failure": "API 调用失败告警规则",
          "threshold": 10,
          "_comment_threshold_count": "失败次数阈值，超过此次数触发告警",
          "duration": 60,
          "severity": "critical"
        },
        {
          "type": "memory_usage",
          "_comment_memory_usage": "内存使用告警规则",
          "threshold_mb": 1000.0,
          "_comment_threshold_mb": "内存使用阈值（MB），平均值超过此值触发告警",
          "duration": 300,
          "severity": "warning"
        }
      ],
      
      "_section_notifiers": "=== 告警通知器配置 ===",
      "notifiers": {
        "log": {
          "enabled": true,
          "_comment_log_notifier": "日志通知器，将告警写入日志"
        },
        
        "http": {
          "enabled": false,
          "_comment_http_notifier": "HTTP 通知器，发送告警到 HTTP 端点",
          "url": "http://localhost:8080/alerts",
          "_comment_url": "告警接收端点 URL",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "${HTTP_AUTHORIZATION_HEADER}"
          },
          "_comment_headers": "自定义 HTTP 头，建议使用环境变量存储认证信息"
        },
        
        "email": {
          "enabled": false,
          "_comment_email_notifier": "邮件通知器，发送告警邮件",
          "smtp_host": "smtp.example.com",
          "_comment_smtp_host": "SMTP 服务器地址",
          "smtp_port": 587,
          "_comment_smtp_port": "SMTP 端口（587 for TLS, 465 for SSL）",
          "from_addr": "alerts@example.com",
          "_comment_from": "发件人地址",
          "to_addrs": ["admin@example.com"],
          "_comment_to": "收件人地址列表",
          "username": "${SMTP_USERNAME}",
          "_comment_username": "SMTP 用户名（可选），建议使用环境变量",
          "password": "${SMTP_PASSWORD}",
          "_comment_password": "SMTP 密码（可选），建议使用环境变量",
          "use_tls": true,
          "_comment_tls": "是否使用 TLS"
        }
      }
    }
  }
}